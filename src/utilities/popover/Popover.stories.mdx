import { useRef, useState } from 'react';
import { Canvas, Meta, Story } from '@storybook/addon-docs';

import IconButton from '../../components/icon-button';
import Popover from './Popover';
import Shape from '../../foundations/shape';
import Grid from '../layout';
import Icon from '../../foundations/icon';
import Spacing from '../spacing';

<Meta title={'Utilities/Popover'} />

<Canvas hidden>
    <Story name="default">
        {() => {
            const [isVisible, setIsVisible] = useState(false);
            const buttonReference = useRef(null);
            function handleClick() {
                setIsVisible(!isVisible);
            }
            return (
                <div>
                    <IconButton
                        icon={'menu'}
                        onClick={handleClick}
                        ref={buttonReference}
                        toggled={isVisible}
                    />
                    <Popover
                        isVisible={isVisible}
                        anchorReference={buttonReference}
                        placement={'bottom-start'}
                    >
                        <Shape elevation={3}>
                            <Grid element={'ul'} justify={'stretch'} padding={Spacing.all(100)}>
                                <li>
                                    <Icon glyph={'message-check'} />
                                    Message
                                </li>
                                <li>
                                    <Icon glyph={'check-circle'} />
                                    Check
                                </li>
                            </Grid>
                        </Shape>
                    </Popover>
                </div>
            );
        }}
    </Story>
</Canvas>
